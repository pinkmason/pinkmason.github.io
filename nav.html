<!doctype html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/nav.css">
  <title>pinkmason的导航</title>
</head>

<body>
  <!-- 导航条 -->
  <div class="navbar">
    <div class="nav-item"><a href="index.html" target="_blank">返回主页</a></div>
    <div class="nav-item linksite" data-linksite="cysite"><a>常用</a></div>
    <div class="nav-item linksite" data-linksite="ylsite"><a>娱乐</a></div>
    <div class="nav-item linksite" data-linksite="gjsite"><a>工具</a></div>
    <!-- 文件浏览功能 -->
    <div style="display:none;" class="nav-item"><a href="..\..\" target="_blank">资料</a></div>
  </div>
  <!-- 搜索框 -->
  <div class="search-container">
    <form onsubmit="event.preventDefault()"><!-- 阻止表单默认的提交行为,; searchBaidu();这里面也可以加 -->
      <input type="text" id="searchInput" class="search-input" placeholder="请输入搜索关键词"
        onkeypress="handleKeyPress(event)">
      <button style="display:none;" type="button" class="search-button" onclick="searchBaidu()">搜索</button>
      <!-- 搜索引擎图标 -->
      <div id="searchtype" style="display: flex; justify-content: center; align-items: center; ">
        <img id="search-icon" src="media/baidu.svg" data-link="https://www.baidu.com/s?wd=" width=70% height=70%
          alt="搜索引擎图标">
      </div>
    </form>
  </div>
  <!-- 搜索引擎 -->
  <div id="searchmenu" style="display: none;justify-content: space-around;">
    <div style="color: blue;" class="search-engine" data-svg="media/baidu.svg" data-link="https://www.baidu.com/s?wd=">
      百度</div>
    <div style="color: blue;" class="search-engine" data-svg="media/google.svg"
      data-link="https://www.google.com/search?q=">谷歌</div>
    <div style="color: blue;" class="search-engine" data-svg="media/sogou.svg"
      data-link="https://www.sogou.com/web?query=">搜狗</div>
    <div style="color: blue;" class="search-engine" data-svg="media/bing.svg" data-link="https://cn.bing.com/search?q=">
      必应</div>
  </div>
  <!-- 常用网站 -->
  <ul id="cysite" class="website active">
    <a href="https://docs.qq.com/desktop/" target="_blank">腾讯文档</a>
    <a href="http://www.github.com/" target="_blank">Github</a>
    <a href="https://fanyi.baidu.com/" target="_blank">百度翻译</a>
    <a href="https://pan.baidu.com/" target="_blank">百度网盘</a>
    <a href="https://www.bilibili.com/" target="_blank">哔哩哔哩</a>
    <a href="https://weibo.com/mygroups?gid=110007866062868" target="_blank">新浪微博</a>
    <a href="https://tieba.baidu.com/home/main?id=tb.1.7cd67a64.qIZHEp8WtLF0JjYORye7mg&fr=userbar"
      target="_blank">百度贴吧</a>
    <a href="https://mp.weixin.qq.com/" target="_blank">微信公众</a>
    <a href="https://chat.baidu.com/" target="_blank">百度AI</a>
    <a href="https://mail.qq.com/" target="_blank">QQ邮箱</a>
    <a href="https://outlook.live.com/mail/0/" target="_blank">Outlook</a>
    <a href="https://www.alipay.com/" target="_blank">支付宝</a>
    <a href="https://www.thepaper.cn/morningEveningPaper" target="_blank">早晚报</a>
    <a href="https://sspai.com/tag/%E6%B4%BE%E6%97%A9%E6%8A%A5" target="_blank">派早报</a>
    <a href="https://tv.cctv.com/live/" target="_blank">CCTV</a>
    <a href="https://www.zhihu.com/follow" target="_blank">知乎</a>
    <a href="https://www.douban.com/" target="_blank">豆瓣</a>
    <a href="https://www.hupu.com/" target="_blank">虎扑</a>
    <a href="https://www.taobao.com/" target="_blank">淘宝</a>
    <a href="https://www.jd.com/" target="_blank">京东</a>
  </ul>
  <!-- 娱乐网站 -->
  <ul id="ylsite" class="website">
    <a href="https://store.steampowered.com/" target="_blank">Steam</a>
    <a href="https://js13kgames.com/" target="_blank">js13k</a>
    <a href="https://www.tennis.com/" target="_blank">Tennis</a>
  </ul>
  <!-- 工具网站 -->
  <ul id="gjsite" class="website">
    <a href="https://www.filetypeadvisor.com/zh-cn/" target="_blank">文件格式</a>
    <a href="https://scandomain.cyayaa.com/#/" target="_blank">域名查询</a>
    <a href="http://duososo.com/index_shitu.php" target="_blank">以图搜图</a>
    <a href="https://kydsj.vip/doku.php?id=start" target="_blank">开源大世界</a>
    <a href="https://www.waytoagi.com/" target="_blank">WaytoAGI</a>
  </ul>
  <!-- 搜索脚本 -->
  <script>
    function searchBaidu() {
      // 获取搜索框中的值
      var searchTerm = document.getElementById('searchInput').value;
      //获取搜索引擎
      var searchlink = document.getElementById('search-icon').getAttribute('data-link')
      var baiduSearchUrl = searchlink + encodeURIComponent(searchTerm);
      // 重定搜索
      window.open(baiduSearchUrl, '_blank');
    }
    function handleKeyPress(event) {
      if (event.key === 'Enter') {
        searchBaidu();
      }
    }
  </script>
  <!-- 随机排列网站 -->
  <script>
    // 数组随机化
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function randomizeElements() {
      const activewebsite = document.querySelector('.website.active');//获取ul对象
      const websiteitems = Array.from(activewebsite.children);
      const shuffledItems = shuffleArray(websiteitems);

      // 清除ul子项
      while (activewebsite.firstChild) {
        activewebsite.removeChild(activewebsite.firstChild);
      }

      // 添加子项
      shuffledItems.forEach(item => activewebsite.appendChild(item));
    }

    //randomizeElements(); 
  </script>
  <!-- 导航栏脚本 -->
  <script>
    document.querySelectorAll(".nav-item.linksite").forEach(function (ni) {
      ni.addEventListener('click', function () {
        //console.log(this);
        var webs = document.querySelectorAll('.website');
        // 遍历所有的内容容器，并隐藏它们
        webs.forEach(function (web) {
          web.classList.remove('active'); // 移除active类，隐藏内容
        });
        var nowsite = document.getElementById(this.getAttribute('data-linksite'));
        nowsite.classList.add('active'); // 添加active类，显示内容
        randomizeElements(); //随机网站
      })
    })
  </script>
  <!-- 搜索引擎切换 -->
  <script>
    document.getElementById('searchtype').addEventListener('click', function () {
      var sm = document.getElementById('searchmenu');
      sm.style.display = "flex";
      //长时间未选择自动关闭，可进一步优化为鼠标悬停在选择dom上时不关闭（有时候会想的比较久）
      setTimeout(function () { sm.style.display = "none" }, 4000)
    });
    document.querySelectorAll('.search-engine').forEach(function (se) {
      se.addEventListener('click', function () {
        // console.log(this);
        //console.log(event.currentTarget);方法也可以
        var imgElement = document.getElementById('search-icon');
        imgElement.src = this.getAttribute('data-svg');
        imgElement.dataset.link = this.getAttribute('data-link');//setAttribute需要data前缀
        var sm = document.getElementById('searchmenu');
        sm.style.display = "none";
      })
    })
  </script>
</body>